Grammar:           DataElement 6.0
Namespace:	       shr.core
Description:       "The datatype domain contains definitions of complex datatypes used in FHIR, with several additions."
CodeSystem:        MTH = http://ncimeta.nci.nih.gov
CodeSystem:        UCUM = http://unitsofmeasure.org
CodeSystem:        LNC = http://loinc.org
CodeSystem:        SCT = http://snomed.info/sct


Element:           Code
Description:       "The main type identifier for a lab, procedure, condition, etc., usually drawn from a controlled vocabulary."
Value:             concept

Group:             Quantity
Description:       "A quantity with units, whose value may be bounded from above or below, as defined in FHIR"
Property:          Number 0..1
Property:          Comparator 0..1
Property:          Units 0..1

Element:           Units
Description:       "The unit of measure of the quantity."
Value:             concept

Element:           Category
Description:       "The general type or class of this item."
Value:             concept

Element:           Type
Concept:           MTH#C0332307
Description:       "A code describing the item at a greater level of detail."
Value:             concept

Element:           Relationship
Description:       "A description of the association between people or items."
Value:             concept

/* not used -- keep for future use
Element:		QualitativeLikelihood
Description:	"A qualitative (subjective) likelihood."
Value:			concept from QualitativeLikelihood

Element:		Depth
Concept:		SCT#131197000 "Depth"
Description:	"The extent downward or inward; the perpendicular measurement from the surface downward to determine deepness."
Value:			Quantity with units UCUM#cm

Element:		Area
Concept:		SCT#42798000 "Area"
Description:	"The extent of a 2-dimensional surface enclosed within a boundary."
Value:			Quantity with units UCUM#cm2

Element:		Volume
Concept:		MTH#C0449468
Description:	"The amount of three dimensional space occupied by an object or the capacity of a space or container."
Value:			Quantity with units UCUM#TBD

Element:		Circumference
Concept:		MTH#C0332520
Description:	"The length of such a boundary line of a figure, area, or object."
*/

Element:           Text
Description:       "A simple string."
Value:             string

Element:           Number
Description:       "A decimal value."
Value:             decimal

Element:           Comparator
Description:       "A code indicated if the value represents an upper or lower bound"
Value:             concept from http://hl7.org/fhir/ValueSet/quantity-comparator (required)

Group:             SimpleQuantity
Parent:            Quantity
Description:       "A quantity where the comparator is not used, as defined in FHIR"
                   Comparator 0..0

Group:             IntegerQuantity
Parent:            Quantity
Description:       "A Quantity that is an integer."
                   Units = UCUM#1

Group:             Age
Parent:            Quantity
Concept:           MTH#C0001779
Description:       "How long someone has been alive, or something has existed."
                   Units from http://hl7.org/fhir/ValueSet/age-units (extensible)

Group:             Distance
Parent:            Quantity
Concept:           MTH#C0012751
Description:       "The measure of space separating two objects or points."
                   Units from http://hl7.org/fhir/ValueSet/distance-units (extensible)

Group:             Duration
Parent:            SimpleQuantity
Concept:           MTH#C0449238
Description:       "The length of time that something continues."
                   Units from http://hl7.org/fhir/ValueSet/duration-units (extensible)

                   // structural changes in R4
Group:             MoneyQuantity
Parent:            Quantity
Description:       "Representation of an amount of currency or monetary value."

                   // new in R4
Group:             Money
Parent:            Quantity
Description:       "Representation of an amount of currency or monetary value."
Property:          MoneyAmount 0..1
Property:          Currency 0..1

Element:           MoneyAmount
Description:       "Numerical value (with implicit precision)"
Value:             decimal

Element:           Currency
Description:       "ISO 4217 Currency Code"
Value:             concept from http://hl7.org/fhir/ValueSet/currencies (required)

Element:           CodeSystem
Description:       "A formal terminology system."
Value:             uri

Group:             Range
Description:       "An interval defined by a quantitative upper and/or lower bound. One of the two bounds must be specified, and the lower bound must be less than the upper bound. When Quantities are specified, the units of measure must be the same."
Property:          LowerBound 0..1
Property:          UpperBound 0..1

Element:           LowerBound
Description:       "The lower limit on a range"
                   // or decimal or unsignedInt or integer 
Value:             SimpleQuantity

Element:           UpperBound
Description:       "The upper limit on a quantitative value."
                   // or decimal or unsignedInt or integer 
Value:             SimpleQuantity

Group:             Ratio
Description:       "A unit of measurement for the quotient of the amount of one entity to another."
Property:          Numerator 0..1
Property:          Denominator 0..1

Element:           Numerator
Description:       "The dividend of a fraction."
Value:             Quantity

Element:           Denominator
Description:       "The divisor of a fraction."
Value:             Quantity

Element:           Purpose
Description:       "Description of the intent or use of the item."
Value:             concept

Group:             ContactPoint
Description:       "An electronic means of contacting an organization or individual."
Property:          TelecomNumberOrAddress 0..1
Property:          Type 0..1
Property:          Purpose 0..1
Property:          PriorityRank 0..1
Property:          EffectiveTimePeriod 0..1
                   Type from http://hl7.org/fhir/ValueSet/contact-point-system (required)
                   Purpose from http://hl7.org/fhir/ValueSet/contact-point-use (required)

Element:           TelecomNumberOrAddress
Description:       "A user name or other identifier on a telecommunication network, such as a telephone number (including country code and extension, if necessary), email address, or SkypeID."
Value:             string

Element:           PriorityRank
Description:       "The priority of the procedure, as a number (1 being the highest priority)"
Value:             positiveInt

Group:             TimePeriod
Description:       "A period of time defined by a start and end time, date, or year.
If the start date/time is missing, the start of the period is not known. If the end date/time is missing, it means that the period is ongoing."
Property:          BeginDateTime 0..1
                   // lack of end time indicates the period was continuing at the time the entry was created
Property:          EndDateTime 0..1

                   // synonym "EffectiveDate"
Element:           BeginDateTime
Description:       "The time at which something is to take effect, start, or did start. Boundary is considered inclusive."
                   // TODO: would like to have date or dateTime but that wouldn't be FHIR-compatible
Value:             dateTime

Element:           EndDateTime
Description:       "The time at which something is to end or did end. Boundary is considered inclusive."
                   // TODO: would like to have date or dateTime but that wouldn't be FHIR-compatible
Value:             dateTime

Group:             Timing
Description:       "A timing schedule that specifies an event that may occur multiple times.
Timing offers a choice of multiple OccurrenceTime (used is used to specify specific times), or recurrence patterns."
Property:          OccurrenceTime 0..*
Property:          TimingCode 0..1
Property:          Repeat 0..1

Element:           TimingCode
Description:       "A code for the timing schedule (or just text in code.text). Some codes such as BID are ubiquitous, but many institutions define their own additional codes. If a code is provided, the code is understood to be a complete statement of whatever is specified in the structured timing data, and either the code or the data may be used to interpret the Timing, with the exception that .repeat.bounds still applies over the code (and is not contained in the code)."
Value:             concept from http://hl7.org/fhir/ValueSet/timing-abbreviation (extensible)

Group:             Repeat
Description:       "A set of rules that describe when a recurring event is scheduled."
Property:          RepeatBounds 0..1
Property:          RepeatCount 0..1
Property:          RepeatCountMax 0..1
Property:          RepeatDuration 0..1
Property:          RepeatDurationMax 0..1
Property:          RepeatDurationUnit 0..1
Property:          RepeatFrequency 0..1
Property:          RepeatFrequencyMax 0..1
Property:          RepeatPeriod 0..1
Property:          RepeatPeriodMax 0..1
Property:          RepeatPeriodUnit 0..1
Property:          DayOfWeek 0..*
Property:          TimeOfDay 0..*
Property:          DailyLifeEvent 0..*
Property:          DailyLifeEventOffset 0..1

Element:           RepeatBounds
Description:       "Either a duration for the length of the timing schedule, a range of possible length, or outer bounds for start and/or end limits of the timing schedule."
Value:             Duration or Range or TimePeriod

Element:           RepeatCount
Description:       "A total count of the desired number of repetitions across the duration of the entire timing specification. If countMax is present, this element indicates the lower bound of the allowed range of count values."
                   // integer in STU3
Value:             positiveInt

Element:           RepeatCountMax
Description:       "If present, indicates that the count is a range - so to perform the action between [count] and [countMax] times."
                   // integer in STU3
Value:             positiveInt

Element:           RepeatDuration
Description:       "How long this thing happens for when it happens. If durationMax is present, this element indicates the lower bound of the allowed range of the duration."
Value:             decimal

Element:           RepeatDurationMax
Description:       "If present, indicates that the duration is a range - so to perform the action between [duration] and [durationMax] time length."
Value:             decimal

Element:           RepeatDurationUnit
Description:       "The units of time for the duration, in UCUM units."
Value:             concept from http://hl7.org/fhir/ValueSet/units-of-time (required)

Element:           RepeatFrequency
Description:       "The number of times to repeat the action within the specified period. If frequencyMax is present, this element indicates the lower bound of the allowed range of the frequency."
                   // integer in STU3
Value:             positiveInt

Element:           RepeatFrequencyMax
Description:       "If present, indicates that the frequency is a range - so to repeat between [frequency] and [frequencyMax] times within the period or period range."
                   // integer in STU3
Value:             positiveInt

Element:           RepeatPeriod
Description:       "Indicates the duration of time over which repetitions are to occur; e.g. to express '3 times per day', 3 would be the frequency and '1 day' would be the period. If periodMax is present, this element indicates the lower bound of the allowed range of the period length."
Value:             decimal

Element:           RepeatPeriodMax
Description:       "If present, indicates that the period is a range from [period] to [periodMax], allowing expressing concepts such as 'do this once every 3-5 days.'"
Value:             decimal

Element:           RepeatPeriodUnit
Description:       "The units of time for the period in UCUM units."
Value:             concept from http://hl7.org/fhir/ValueSet/units-of-time (required)

Element:           DayOfWeek
Description:       "If one or more days of week is provided, then the action happens only on the specified day(s)."
Value:             concept from http://hl7.org/fhir/ValueSet/days-of-week (required)

Element:           TimeOfDay
Description:       "Time of day the event should take place on the designated day(s)."
Value:             time

Element:           DailyLifeEvent
Description:       "An approximate time period during the day, potentially linked to an event of daily living that indicates when the action should occur."
Value:             concept from http://hl7.org/fhir/ValueSet/event-timing (required)

Element:           DailyLifeEventOffset
Description:       "The number of minutes from the event. If the event code does not indicate whether the minutes is before or after the event, then the offset is assumed to be after the event."
Value:             unsignedInt

Group:             SampledData
Description:       "Data that comes from a series of measurements taken by a device, which may have upper and lower limits. The data type also supports more than one dimension in the data."
Property:          DataAsString 1..1
Property:          Origin 1..1
Property:          MillisecondsBetweenSamples 1..1
Property:          CorrectionFactor 0..1
Property:          LowerLimit 0..1
Property:          UpperLimit 0..1
Property:          Dimensions 1..1

Element:           DataAsString
Description:       "Data represented as a text sting."
Value:             string

Element:           Origin
Description:       "The quantity that a measured value of zero represents. In addition, this provides the units of the entire measurement series."
Value:             SimpleQuantity

Element:           MillisecondsBetweenSamples
Description:       "The length of time between sampling times, measured in milliseconds."
Value:             decimal

Element:           CorrectionFactor
Description:       "A correction factor that is applied to the sampled data points before they are added to the origin."
Value:             decimal

Element:           LowerLimit
Description:       "The lower limit of detection of the measured points. This is needed if any of the data points have the value 'L' (lower than detection limit)."
Value:             decimal

Element:           UpperLimit
Description:       "The upper limit of detection of the measured points. This is needed if any of the data points have the value 'U' (higher than detection limit)."
Value:             decimal

Element:           Dimensions
Description:       "The number of sample points at each time point. If this value is greater than one, then the dimensions will be interlaced - all the sample points for a point in time will be recorded at once."
Value:             positiveInt

Group:             Address
Description:       "An address expressed using postal conventions (as opposed to GPS or other location definition formats). This data type may be used to convey addresses for use in delivering mail as well as for visiting locations and which might not be valid for mail delivery. There are a variety of postal address formats defined around the world. (Source: HL7 FHIR)."
Property:          Purpose 0..1
Property:          Type 0..1
Property:          DisplayText 0..1
Property:          AddressLine 0..*
Property:          City 0..1
Property:          District 0..1
Property:          State 0..1
Property:          PostalCode 0..1
Property:          Country 0..1
Property:          EffectiveTimePeriod 0..1
                   Purpose from http://hl7.org/fhir/ValueSet/address-use (required)
                   Type from http://hl7.org/fhir/ValueSet/address-type (required)

Element:           AddressLine
Description:       "Part of an address that contains the house number, apartment number, street name, street direction, P.O. Box number, delivery hints, and similar address information. (Source: HL7 FHIR)."
Value:             string

Element:           City
Description:       "The name of a municipality, city, town, village or other community or delivery center. (Source: HL7 FHIR)."
Value:             string

Element:           District
Description:       "The name of the administrative area at a level below that of a state but above that of a city or town. In the US, a county. Outside the US, a district or the equivalent. (Source: HL7 FHIR)."
Value:             string

Element:           State
Description:       "Sub-unit of a country with limited sovereignty in a federally organized country. A code may be used if codes are in common use (i.e. US 2 letter state codes). (Source: HL7 FHIR)."
Value:             string

Element:           PostalCode
Description:       "A sequence of letters and digits used as part of a postal address, often designating a geographic region"
Value:             string

Element:           Country
Description:       "Country - a nation as commonly understood or generally accepted, expressed in ISO 3166 Alpha-2 (2-letter) codes."
Value:             string

                   //------------ Complex Data Types not in FHIR ----------------
Element:           Count
Description:       "The number of items (0 or more), as an integer."
Value:             unsignedInt

Element:           CommentOrDescription
Description:       "A text note containing additional details, explanation, description, comment, or summarization."
Value:             string

Group:             DurationRange
Parent:            Range
Description:       "A range of durations."
                   LowerBound[SimpleQuantity] substitute Duration
                   UpperBound[SimpleQuantity] substitute Duration

Element:           PriorityCode
Description:       "An indication of the importance of an action relative to other actions."
Value:             positiveInt or concept

Group:             Percentage
Parent:            SimpleQuantity
Description:       "A percentage value where 100.0 represents 100%."
                   Units = UCUM#%

Element:           CanonicalUrl
Description:       "A URI that refers to a resource by its canonical URL (resources with a url property). The canonical type differs from a uri in that it has special meaning in this specification, and in that it may have a version appended, separated by a vertical bar (|)."
Value:             uri

                  // TODO: this may be an observation - there are different methods (at least 10 LOINC codes) for estimating gestational age.
Group:             GestationalAge
Parent:            Age
Concept:           MTH#C0017504
Description:       "The age of the embryo or fetus. This may be assessed by medical history, physical examination, early immunologic pregnancy tests, radiography, ultrasonography, and amniotic fluid analysis."

Group:             Frequency
Parent:            Ratio
Concept:           MTH#C0376249
Description:       "How many occurrences of an event per unit of time."
                   Numerator[Quantity].Units = UCUM#1
                   Denominator[Quantity].Units from http://hl7.org/fhir/ValueSet/units-of-time (required)

                   //------------- Interpretations of Time -------------------
Group:             EffectiveTimePeriod
Parent:            TimePeriod
Concept:           MTH#C2985763
Description:       "The date and time span for which something is active, valid, or in force."

Element:           ReceivedTime
Concept:           MTH#C2735124
Description:       "Time the item was delivered to, or accepted by, the receiving facility or unit."
Value:             dateTime

Element:           OccurrenceTimeOrPeriod
Description:       "The point or period of time when the event takes place. Times can be precise (dateTime) or approximate (date). If a time period is used, and the start date or dateTime is missing, the start of the period is not known. If the end date or dateTime is missing, it means that the period is ongoing."
Value:             date or dateTime or TimePeriod

Element:           NonOccurrenceTimeOrPeriod
Description:       "The point in time or span of time in which something did not happen."
Value:             date or dateTime or TimePeriod

Element:           OccurrenceTime
Parent:            OccurrenceTimeOrPeriod
Description:       "The point in time in which something happens."
Value:             dateTime

Element:           OccurrencePeriod
Parent:            OccurrenceTimeOrPeriod
Description:       "The point in time or span of time in which something happens."
Value:             TimePeriod

Element:           OccurrenceDuration
Description:       "The length of time in which something happens."
Value:             Duration

                   //---------------  Positions and Addresses -----------------
Group:             Geoposition
Description:       "The location on the surface of the Earth, described by a latitude and longitude (and optional altitude)."
Property:          Latitude 1..1
Property:          Longitude 1..1
Property:          Altitude 0..1

Element:           Latitude
Description:       "The angular distance north or south between an imaginary line around a heavenly body parallel to its equator and the equator itself. Measured with with WGS84 datum."
Value:             decimal

Element:           Longitude
Description:       "An imaginary great circle on the surface of a heavenly body passing through the poles at right angles to the equator. Measured with with WGS84 datum."
Value:             decimal

Element:           Altitude
Description:       "Height above sea level or above the earth's surface. Measured with with WGS84 datum."
Value:             decimal

Group:             UnitedStatesAddress
Parent:            Address
Description:       "An address for a place in the USA, conforming to US mail postal conventions. (Source: HL7 FHIR)."
                   State substitute UnitedStatesState
                   // is "US"   // fixed -- string constraints not yet supported
                   UnitedStatesState 1..1
                   Country 1..1

Element:           UnitedStatesState
Parent:            State
Description:       "A state or territory in the USA expressed by 2-letter US Postal code."

                   //Value:			string from http://pe.usps.com/text/pub28/28apb.htm   // expressed as string to conform with definition of State
Element:           DisplayText
Description:       "A string meant for reading by a person, for example, accompanying a code."
Value:             string

Element:           VersionString
Description:       "A string associated with the product that identifies a particular release iteration."
Value:             string

Element:           Title
Description:       "A distinguishing word or group of words naming an item."
Value:             string

Group:             EmbeddedContent
Description:       "Abstract class defining the common metadata of all types of encapsulated data, such as images."

Group:             ParsableContent
Parent:            EmbeddedContent
Description:       "A string that follows a formal syntax and can be analyzed and broken into meaningful parts."
Property:          Text 1..1
Property:          Formalism 1..1

Element:           Formalism
Description:       "The system of formal syntax or interpretation associated with parsable content."
Value:             concept

Group:             Attachment
Parent:            EmbeddedContent
Description:       "A file that contains audio, video, image, or similar content."
Property:          BinaryData 0..1
                   //http://hl7.org/fhir/ValueSet/mimetypes in R4, http://www.rfc-editor.org/bcp/bcp13.txt in DSTU2 and STU3
Property:          ContentType 0..1
Property:          Language 0..1
Property:          ResourceLocation 0..1
Property:          ResourceSize 0..1
Property:          Hash 0..1
Property:          Title 0..1
Property:          CreationDateTime 0..1

Element:           BinaryData
Description:       "The data itself."
Value:             base64Binary

Element:           ContentType
Description:       "The mime type of the content, with charset etc."
Value:             concept

Element:           Language
Description:       "A human language, spoken or written."
Value:             concept

Element:           ResourceLocation
Description:       "URL where data can be found."
                   // changed from uri for R4 compatibility
Value:             Url

Element:           Url
Description:       "A unique URL."
Value:             uri

Element:           ResourceSize
Description:       "Number of bytes of content in the resource (if url provided)"
Value:             unsignedInt

Element:           Hash
Description:       "A hash code of the data (sha-1, base64ed)"
Value:             base64Binary

Element:           CreationDateTime
Concept:           MTH#C3669169
Description:       "The point in time when the item was created."
                   // we can map to instant from dateTime
Value:             dateTime

Group:             PhotographicImage
Parent:            Attachment
Concept:           LNC#72170-4 "Photographic image	[Attachment]"
Description:       "An attachment of a photographic type. The mime type should be either bmp, gif, jpeg, png, svg, or tiff."

Element:           SignatureType
Description:       "Type of signature"
Value:             concept

Element:           RouteIntoBody
Concept:           MTH#C0013153
Description:       "The way a substance enters an organism after contact, particularly, the route of drug administration."
Value:             concept from http://hl7.org/fhir/ValueSet/route-codes (required)
